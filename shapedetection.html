<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Shape Detection Demo</title>
</head>

<body>
  <div> This page contains an arbitrary image. </div>
  <button onclick="drawFaceBoundingBoxes()">Detect faces</button>
  <br/>
  <img id="photo" src="https://skybiometry.com/wp-content/uploads/2015/09/work-2-1-e1451907791984.jpg">
  <p>Canvas:</p>
  <canvas id="myCanvas" width="240" height="297" style="border:1px solid #d3d3d3;">
  Your browser does not support the HTML5 canvas tag.
  </canvas>
  <br/>
</body>

<script type="text/javascript" src="dimsum.js"></script>
<script>
var c = document.getElementById("myCanvas");
var ctx = c.getContext("2d");

window.onload = function() {
    var img = new Image();
    img.src = "https://skybiometry.com/wp-content/uploads/2015/09/work-2-1-e1451907791984.jpg";
    c.width = img.naturalWidth + 20;
    c.height = img.naturalHeight + 20;
    ctx.drawImage(img, 10, 10);
}

function drawFaceBoundingBoxes() {
    var photo = document.getElementById("photo");
    var detector = new FaceDetector();
    detector.detect(photo)
      .then(faceDetectionResult => {
        console.log(faceDetectionResult);
        for each (var boundingBox in faceDetectionResult) {
          ctx.rect(10+boundingBox.x, 10+boundingBox.y, boundingBox.width, boundingBox.height);
          ctx.stroke();
        }
      })
      .catch(error => {
        alert("Error during detect(photo): " + error);
      });
}


</script>
</html>
