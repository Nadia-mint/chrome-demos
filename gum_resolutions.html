<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Multi resolutions getUserMedia() demo</title>
</head>

<body>
<div> Open the system camera in different resolutions. </div>
</body>

<script type="text/javascript" src="mustard_dimsum.js"></script>
<script>
/* global webkitURL */

function makeGetStreamX(width, height, buttonName) {
  return function() {
    var constraintsWidthXHeight = {
      "audio": false,
      "video": {
        "mandatory": {
          "minWidth": width,
          "maxWidth": width,
          "minHeight": height,
          "maxHeight": height
        },
        "optional": []
      }
    };
    navigator.webkitGetUserMedia(constraintsWidthXHeight, gotStream, getUserMediaFailedCallback);
    document.getElementById(buttonName).disabled = true;
  };
}

function gotStream(stream) {
  console.log("Got video device capturing");
  var videoTag = document.createElement('video');
  videoTag.src = webkitURL.createObjectURL(stream);
  videoTag.height = 180;
  videoTag.width = 240;
  document.body.appendChild(videoTag);
  videoTag.play();
}

createButton("btn1", "320x240", makeGetStreamX(320, 240, "btn1"));
createButton("btn2", "640x480", makeGetStreamX(640, 480, "btn2"));
createButton("btn3", "960x720", makeGetStreamX(960, 720, "btn3"));
createButton("btn4", "1280x720", makeGetStreamX(1280, 720, "btn4"));

</script>
</html>
