<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Single camera getUserMedia() demo</title>
<script>
/* global webkitURL */

function makeGetStreamX(width, height, buttonName) {
  return function() {
    var constraintsWidthXHeight = {
      "audio": false,
      "video": {
        "mandatory": {
          "minWidth": width,
          "maxWidth": width,
          "minHeight": height,
          "maxHeight": height
        },
        "optional": []
      }
    };
    navigator.webkitGetUserMedia(constraintsWidthXHeight, gotStream, getUserMediaError);
    document.getElementById(buttonName).disabled = true;
  };
}

function gotStream(stream) {
  console.log("Got video device capturing");
  var videoTag = document.createElement('video');
  videoTag.src = webkitURL.createObjectURL(stream);
  videoTag.height = 180;
  videoTag.width = 240;
  document.body.appendChild(videoTag);
  videoTag.play();
}

function getUserMediaError(e) {
  console.assert(false, 'Error during webkitGetUserMedia: '+e);
}

function createButton(id, text, onClick){
  var button = document.createElement("input");
  button,id = id;
  button.type = "button";
  button.value = text;
  button.onclick = onClick;
  document.body.appendChild(button);
}

createButton("btn1", "320x240", makeGetStreamX(320, 240, "btn1"));
createButton("btn2", "640x480", makeGetStreamX(640, 480, "btn2"));
createButton("btn3", "960x720", makeGetStreamX(960, 720, "btn3"));
createButton("btn4", "1280x720", makeGetStreamX(1280, 720, "btn4"));

</script>
</head>

<body>
<div> Open the system camera in different resolutions. </div>
</body>
</html>
