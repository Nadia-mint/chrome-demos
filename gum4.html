<!DOCTYPE html>
<!-- saved from url=(0070)http://webrtc.googlecode.com/svn/trunk/samples/js/demos/html/gum1.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>getUserMedia Demo Z</title>
<style>
video {
    border:5px solid black;
    width:400px;
    height:300px;
}
button {
    font: 18px sans-serif;
    padding: 8px;
}
</style>
</head>
<body>
<div> Open a camera in different resolutions and framerates, simultaneously and in different orders. 
</div>
<button id="btn1">320x240 @5-20fps</button>
<button id="btn2">640x480</button>
<button id="btn3">1280x720</button>
<button id="btn4">960x720</button>
<br/>

<script>
var constraints320x240 = {
  "audio": false,
  "video": {
    "mandatory": {
      "minWidth": "320",
      "maxWidth": "320",
      "minHeight": "240",
      "maxHeight": "240",
      "minFrameRate": "5",
      "maxFrameRate": "20",
    },
    "optional": []
  }
};

var constraints1280x720 = {
  "audio": false,
  "video": {
    "mandatory": {
      "minWidth": "1280",
      "maxWidth": "1280",
      "minHeight": "720",
      "maxHeight": "720",
    },
    "optional": []
  }
};

var constraints640x480 = {
  "audio": false,
  "video": {
    "mandatory": {
      "minWidth": "640",
      "maxWidth": "640",
      "minHeight": "480",
      "maxHeight": "480",
    },
    "optional": []
  }
};

var constraints960x720 = {
  "audio": false,
  "video": {
    "mandatory": {
      "minWidth": "960",
      "maxWidth": "960",
      "minHeight": "720",
      "maxHeight": "720"
    },
    "optional": []
  }
};

function makeGetStreamX(constraints, button) {
  return function() {
    navigator.webkitGetUserMedia(constraints, gotStream, getUserMediaError);
    button.disabled = true;
  };
};

function gotStream(stream) {
  console.log("Got video device capturing");
  var video_tag = document.createElement('video');
  video_tag.src = webkitURL.createObjectURL(stream);
  document.body.appendChild(video_tag);
  video_tag.play();
}

function getUserMediaError(e) {
  console.assert(false, 'Error during webkitGetUserMedia: '+e);
}

var btn1 = document.getElementById("btn1");
var btn2 = document.getElementById("btn2");
var btn3 = document.getElementById("btn3");
var btn4 = document.getElementById("btn4");

btn1.onclick = makeGetStreamX(constraints320x240, btn1);
btn2.onclick = makeGetStreamX(constraints640x480, btn2);
btn3.onclick = makeGetStreamX(constraints1280x720, btn3);
btn4.onclick = makeGetStreamX(constraints960x720, btn4);

</script>
</body></html>
